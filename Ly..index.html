<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Luz en mis noches</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    background:black;
    overflow:hidden;
    font-family:Georgia, serif;
    color:white;
}

/* CAJA DE TEXTO */
#mensaje{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    max-width:80%;
    background:#0b1d3a;
    border:1px solid #4fa3ff;
    padding:18px 28px;
    border-radius:14px;
    font-size:1.2em;
    text-align:center;
    box-shadow:0 0 20px rgba(79,163,255,0.4);
    z-index:10;
}

/* ESTRELLAS */
.estrella{
    position:absolute;
    border-radius:50%;
    cursor:pointer;
}

/* Fondo */
.fondo{
    width:10px;
    height:10px;
    background:#fff4a3;
    box-shadow:0 0 6px #ffd700;
}

/* Orión */
.orion{
    width:12px;
    height:12px;
    background:#8fd3ff;
    box-shadow:0 0 10px #3fa9ff;
}

/* EXPLOSIÓN */
@keyframes explosion{
    0%{transform:scale(1);opacity:1;}
    50%{transform:scale(4);opacity:.8;}
    100%{transform:scale(7);opacity:0;}
}
.explotar{
    animation:explosion .9s ease-out forwards;
}

/* LUNA */
#luna{
    display:none;
    position:fixed;
    top:40%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    z-index:5;
}

.luna{
    width:160px;
    height:160px;
    border-radius:50%;
    background:
      radial-gradient(circle at 30% 30%, #ffffff, #d9d9d9 60%, #bfbfbf);
    box-shadow:0 0 40px rgba(255,255,255,.6);
    margin:auto;
}

/* MENSAJE FINAL */
#final{
    margin-top:20px;
    font-size:1.4em;
    max-width:320px;
    text-align:center;
    color:#e6f2ff;
}
</style>
</head>

<body>

<div id="mensaje">
    Cada estrella guarda algo que quiero decirte ✨
</div>

<div id="luna">
    <div class="luna"></div>
    <div id="final">
        Eres la luz que ilumina mis noches cuando pienso en ti
    </div>
</div>

<script>
/* MENSAJES */
const mensajesFondo=[
 "Pensar en tu sonrisa es ver la Luna.",
 "Hay estrellas bonitas, pero ninguna como tú.",
 "Todo es más bonito a tu lado.",
 "El cielo tiene sentido cuando pienso en ti.",
 "Mi noche favorita es la que te incluye.",
 "Eres mi constelación favorita.",
 "Contigo el universo se siente pequeño."
];

const mensajesOrion=[
 "Desde que te vi supe que eras especial.",
 "Tus ojos fueron la primera señal.",
 "Tu forma de ser cambió la órbita.",
 "Tu sonrisa se volvió referencia.",
 "Mirarte es mirar al cielo.",
 "No era azar, era gravedad.",
 "Eres mi punto fijo."
];

const orionPos=[
 {x:40,y:20},{x:55,y:22},{x:45,y:40},
 {x:50,y:42},{x:55,y:44},{x:48,y:65},{x:60,y:68}
];

let estrellasRestantes=0;
let indiceFondo=0;

/* PROTECCIÓN DE CAJA */
function fueraDeCaja(x,y){
 const caja=document.getElementById("mensaje").getBoundingClientRect();
 return !(x>caja.left-30 && x<caja.right+30 &&
          y>caja.top-30 && y<caja.bottom+30);
}

/* CREAR ESTRELLA */
function crearEstrella(x,y,clase,mensaje){
 const e=document.createElement("div");
 e.className="estrella "+clase;
 e.style.left=x;
 e.style.top=y;
 estrellasRestantes++;

 e.onclick=()=>{
   document.getElementById("mensaje").innerText=mensaje;
   e.classList.add("explotar");
   setTimeout(()=>e.remove(),900);
   estrellasRestantes--;
   if(estrellasRestantes===0) mostrarLuna();
 };

 document.body.appendChild(e);
}

/* ORIÓN */
orionPos.forEach((p,i)=>{
 crearEstrella(p.x+"vw",p.y+"vh","orion",mensajesOrion[i]);
});

/* FONDO */
for(let i=0;i<35;i++){
 let x,y;
 do{
   x=Math.random()*innerWidth;
   y=Math.random()*innerHeight;
 }while(!fueraDeCaja(x,y));

 crearEstrella(
   x+"px",
   y+"px",
   "fondo",
   mensajesFondo[indiceFondo++ % mensajesFondo.length]
 );
}

/* LUNA FINAL */
function mostrarLuna(){
 document.getElementById("mensaje").innerText =
   "Y al final, todo el cielo quedó en silencio…";
 document.getElementById("luna").style.display="block";
}
</script>

</body>
</html>
