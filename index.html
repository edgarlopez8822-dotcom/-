<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Colapso del Universo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    margin: 0;
    background-color: black;
    overflow: hidden;
    font-family: "Georgia", serif;
    color: white;
}

/* CAJA DE TEXTO (ZONA PROTEGIDA) */
#mensaje {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 80%;
    background-color: #0b1d3a;
    border: 1px solid #4fa3ff;
    padding: 18px 28px;
    border-radius: 14px;
    font-size: 1.2em;
    text-align: center;
    box-shadow: 0 0 20px rgba(79,163,255,0.4);
    z-index: 10;
}

/* ESTRELLAS */
.estrella {
    position: absolute;
    border-radius: 50%;
    cursor: pointer;
}

/* Fondo */
.fondo {
    width: 10px;
    height: 10px;
    background: #fff4a3;
    box-shadow: 0 0 6px #ffd700;
}

/* OriÃ³n */
.orion {
    width: 12px;
    height: 12px;
    background: #8fd3ff;
    box-shadow: 0 0 10px #3fa9ff;
}

/* ExplosiÃ³n */
@keyframes explosion {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(4); opacity: 0.8; }
    100% { transform: scale(7); opacity: 0; }
}

.explotar {
    animation: explosion 0.9s ease-out forwards;
}

/* SATURNO */
#saturno {
    display: none;
    position: fixed;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.planeta {
    width: 120px;
    height: 120px;
    background: #cfae70;
    border-radius: 50%;
    box-shadow: 0 0 30px #cfae70;
    margin: auto;
}

.anillos {
    width: 180px;
    height: 40px;
    border: 4px solid #d8c08a;
    border-radius: 50%;
    margin: -30px auto 20px;
}

button {
    font-size: 1.1em;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
}

/* FINALES */
.feliz {
    transform: scale(1.5);
    box-shadow: 0 0 60px gold;
}

.agujero {
    background: black;
    box-shadow: 0 0 80px purple;
}
</style>
</head>

<body>

<div id="mensaje">
    Cada estrella guarda algo que quiero decirte âœ¨
</div>

<div id="saturno">
    <div class="planeta" id="planeta"></div>
    <div class="anillos"></div>
    <div>
        <h2>Â¿Te gustarÃ­a ser mi novia?</h2>
        <button onclick="respuestaSi()">SÃ­</button>
        <button onclick="respuestaNo()">No</button>
    </div>
</div>

<script>
const mensajesFondo = [
    "Pensarte ilumina incluso el vacÃ­o.",
    "Hay estrellas bonitas, pero ninguna como tÃº.",
    "A veces el universo se siente mÃ¡s cercano contigo.",
    "No todo lo entiendo, pero esto sÃ­.",
    "El cielo tiene sentido cuando pienso en ti."
];

const mensajesOrion = [
    "Desde que te vi, supe que me gustabas.",
    "Luego notÃ© tus ojos.",
    "DespuÃ©s tu forma de ser.",
    "Tu risa se volviÃ³ referencia.",
    "Siempre eras tÃº.",
    "No era azar, era gravedad.",
    "Me gustas."
];

const orionPos = [
    {x:40,y:20},{x:55,y:22},{x:45,y:40},
    {x:50,y:42},{x:55,y:44},{x:48,y:65},{x:60,y:68}
];

let estrellasRestantes = 0;
let indiceOrion = 0;

function fueraDeCaja(x,y){
    const caja = document.getElementById("mensaje").getBoundingClientRect();
    return !(x > caja.left-30 && x < caja.right+30 &&
             y > caja.top-30 && y < caja.bottom+30);
}

function crearEstrella(x,y,clase,mensaje){
    const e = document.createElement("div");
    e.className = "estrella " + clase;
    e.style.left = x;
    e.style.top = y;
    estrellasRestantes++;

    e.onclick = () => {
        document.getElementById("mensaje").innerText = mensaje;
        e.classList.add("explotar");
        setTimeout(()=>e.remove(),900);
        estrellasRestantes--;
        if(estrellasRestantes===0) mostrarSaturno();
    };

    document.body.appendChild(e);
}

/* OriÃ³n */
orionPos.forEach((p,i)=>{
    crearEstrella(p.x+"vw",p.y+"vh","orion",mensajesOrion[i]);
});

/* Fondo */
for(let i=0;i<35;i++){
    let x,y;
    do{
        x=Math.random()*window.innerWidth;
        y=Math.random()*window.innerHeight;
    }while(!fueraDeCaja(x,y));
    crearEstrella(x+"px",y+"px","fondo",
        mensajesFondo[Math.floor(Math.random()*mensajesFondo.length)]);
}

function mostrarSaturno(){
    document.getElementById("mensaje").innerText =
        "Todo colapsÃ³ en un solo puntoâ€¦";
    document.getElementById("saturno").style.display="block";
}

function respuestaSi(){
    document.getElementById("planeta").classList.add("feliz");
    document.getElementById("mensaje").innerText =
        "Universo estable. Estado final: felicidad ðŸ’™";
}

function respuestaNo(){
    document.getElementById("planeta").classList.add("agujero");
    document.getElementById("mensaje").innerText =
        "Colapso gravitacional inevitable.";
}
</script>

</body>
</html>
